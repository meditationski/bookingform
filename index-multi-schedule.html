<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Form - Multi Schedule</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body { 
    background: transparent; 
    font-family: Arial, sans-serif; 
    color: #d0d8e2;
    padding: 20px;
}

.container { 
    max-width: 1200px; 
    margin: 0 auto; 
}

.step { display: none; }
.step.active { display: block; }

h2 {
    text-align: center;
    color: #fff;
    margin-bottom: 20px;
    font-size: 24px;
}

/* Tabs */
.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    background: rgba(30, 34, 40, 0.8);
    padding: 5px;
    border-radius: 15px;
}

.tab {
    flex: 1;
    padding: 15px;
    background: transparent;
    border: none;
    color: #d0d8e2;
    cursor: pointer;
    border-radius: 15px;
    font-size: 16px;
    font-weight: bold;
}

.tab.active {
    background: linear-gradient(106deg, #00A3FF 0%, #F59A47 100%);
    color: #fff;
}

/* Form controls */
.form-group {
    margin-bottom: 20px;
}

select {
    width: 100%;
    padding: 15px;
    background: rgba(30, 34, 40, 0.8);
    border: 1px solid rgba(52, 56, 64, 0.8);
    border-radius: 15px;
    color: #fff;
    font-size: 16px;
}

/* Sliders */
.slider-box {
    background: rgba(30, 34, 40, 0.8);
    padding: 20px;
    border-radius: 15px;
}

.slider-label {
    text-align: center;
    font-size: 20px;
    color: #fff;
    margin-bottom: 15px;
    font-weight: bold;
}

input[type="range"] {
    width: 100%;
    height: 8px;
    background: rgba(52, 56, 64, 0.8);
    border-radius: 10px;
    outline: none;
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 30px;
    height: 30px;
    background: linear-gradient(106deg, #00A3FF 0%, #F59A47 100%);
    border-radius: 50%;
    cursor: pointer;
}

input[type="range"]::-moz-range-thumb {
    width: 30px;
    height: 30px;
    background: linear-gradient(106deg, #00A3FF 0%, #F59A47 100%);
    border-radius: 50%;
    cursor: pointer;
    border: none;
}

.slider-values {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #7a8596;
    margin-top: 10px;
}

/* Price card */
.price-card {
    background: rgba(30, 34, 40, 0.8);
    padding: 25px;
    border-radius: 15px;
    margin: 20px 0;
    border: 1px solid rgba(52, 56, 64, 0.8);
}

.price-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    font-size: 18px;
}

.price-label {
    color: #d0d8e2;
}

.price-value {
    color: #fff;
    font-weight: bold;
}

.total-price {
    font-size: 36px;
    font-weight: bold;
    background: linear-gradient(106deg, #00A3FF 0%, #F59A47 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Lessons schedule */
.lesson-item {
    background: rgba(30, 34, 40, 0.8);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    border: 2px solid rgba(52, 56, 64, 0.8);
}

.lesson-item.completed {
    border-color: #00ff88;
}

.lesson-title {
    font-size: 20px;
    color: #fff;
    font-weight: bold;
    margin-bottom: 15px;
}

.date-time-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 15px;
}

input[type="date"],
input[type="time"] {
    width: 100%;
    padding: 15px;
    background: rgba(52, 56, 64, 0.8);
    border: 1px solid rgba(52, 56, 64, 0.8);
    border-radius: 15px;
    color: #fff;
    font-size: 16px;
}

/* Form inputs */
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="number"] {
    width: 100%;
    padding: 15px;
    background: rgba(30, 34, 40, 0.8);
    border: 1px solid rgba(52, 56, 64, 0.8);
    border-radius: 15px;
    color: #fff;
    font-size: 16px;
    margin-bottom: 15px;
}

textarea {
    width: 100%;
    padding: 15px;
    background: rgba(30, 34, 40, 0.8);
    border: 1px solid rgba(52, 56, 64, 0.8);
    border-radius: 15px;
    color: #fff;
    font-size: 16px;
    margin-bottom: 15px;
    min-height: 100px;
}

/* Buttons */
.buttons {
    display: flex;
    gap: 15px;
    margin-top: 30px;
    justify-content: space-between;
}

button {
    padding: 18px 30px;
    border: none;
    border-radius: 40px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    flex: 1;
}

.btn-next {
    background: linear-gradient(106deg, #00A3FF 0%, #F59A47 100%);
    color: #fff;
}

.btn-next:disabled {
    background: rgba(52, 56, 64, 0.8);
    cursor: not-allowed;
    opacity: 0.5;
}

.btn-back {
    background: transparent;
    color: #d0d8e2;
    border: 2px solid rgba(255, 255, 255, 0.5);
}

.btn-submit {
    background: linear-gradient(106deg, #F59A47 0%, #00A3FF 100%);
    color: #fff;
    border: 2px solid #fff;
}

/* Success screen */
.success {
    text-align: center;
    padding: 60px 20px;
}

.success-icon {
    font-size: 80px;
    color: #00ff88;
    margin-bottom: 20px;
}

.success-title {
    font-size: 32px;
    color: #fff;
    margin-bottom: 15px;
}

.success-message {
    font-size: 18px;
    color: #d0d8e2;
}

/* Dates summary */
.dates-list {
    margin-top: 15px;
}

.date-item {
    background: rgba(0, 163, 255, 0.1);
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 8px;
    display: flex;
    justify-content: space-between;
    font-size: 14px;
}

.date-item-label {
    color: #7a8596;
}

.date-item-value {
    color: #00A3FF;
    font-weight: bold;
}

@media (max-width: 768px) {
    body { padding: 10px; }
    h2 { font-size: 20px; }
    .tabs { flex-direction: row; }
    .tab { font-size: 14px; padding: 12px; }
    .date-time-group { grid-template-columns: 1fr; }
    .buttons { flex-direction: column; }
    button { width: 100%; }
}
    </style>
</head>
<body>
    <div class="container">
        <!-- Step 1: Lesson Details -->
        <div class="step active" id="step1">
            <h2>Lesson Details</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="selectSport('ski')">Ski</button>
                <button class="tab" onclick="selectSport('snowboard')">Snowboard</button>
                <button class="tab" onclick="selectSport('kids')">Kids Club</button>
            </div>
            
            <div class="form-group">
                <select id="duration" onchange="calculate()">
                    <option value="100">2 Hours - $100</option>
                    <option value="140">3 Hours - $140</option>
                    <option value="250">Full Day - $250</option>
                </select>
            </div>
            
            <div class="form-group">
                <div class="slider-box">
                    <div class="slider-label" id="participantsLabel">1 Person</div>
                    <input type="range" id="participants" min="1" max="5" value="1" oninput="updateParticipants(this.value)">
                    <div class="slider-values">
                        <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <div class="slider-box">
                    <div class="slider-label" id="daysLabel">1 Day</div>
                    <input type="range" id="days" min="1" max="10" value="1" oninput="updateDays(this.value)">
                    <div class="slider-values">
                        <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        <span>6</span><span>7</span><span>8</span><span>9</span><span>10</span>
                    </div>
                </div>
            </div>
            
            <div class="price-card">
                <div class="price-row">
                    <span class="price-label">Total:</span>
                    <span class="total-price" id="total1">$100</span>
                </div>
                <div class="price-row">
                    <span class="price-label">Deposit (20%):</span>
                    <span class="price-value" id="deposit1">$20</span>
                </div>
                <div class="price-row">
                    <span class="price-label">Remaining:</span>
                    <span class="price-value" id="remaining1">$80</span>
                </div>
            </div>
            
            <div class="buttons">
                <div></div>
                <button class="btn-next" onclick="goToStep2()">Continue</button>
            </div>
        </div>

        <!-- Step 2: Schedule -->
        <div class="step" id="step2">
            <h2>Select Date & Time for Each Lesson</h2>
            
            <div id="lessonsContainer"></div>
            
            <div class="price-card">
                <div class="price-row">
                    <span class="price-label">Total:</span>
                    <span class="total-price" id="total2">$100</span>
                </div>
                <div class="dates-list" id="datesList"></div>
            </div>
            
            <div class="buttons">
                <button class="btn-back" onclick="goToStep(1)">Back</button>
                <button class="btn-next" id="btnStep3" disabled onclick="goToStep3()">Continue</button>
            </div>
        </div>

        <!-- Step 3: Personal Info -->
        <div class="step" id="step3">
            <h2>Personal Information</h2>
            
            <input type="text" id="name" placeholder="Full Name *" required>
            <input type="email" id="email" placeholder="Email *" required>
            <input type="tel" id="phone" placeholder="Phone *" required>
            <input type="number" id="age" placeholder="Age *" min="5" max="80" required>
            
            <select id="skill">
                <option value="">Skill Level *</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
            </select>
            
            <input type="text" id="hotel" placeholder="Hotel Name *" required>
            <textarea id="notes" placeholder="Special Requests (Optional)"></textarea>
            
            <div class="price-card">
                <div class="price-row">
                    <span class="price-label">Total:</span>
                    <span class="total-price" id="total3">$100</span>
                </div>
                <div class="dates-list" id="datesList3"></div>
            </div>
            
            <div class="buttons">
                <button class="btn-back" onclick="goToStep(2)">Back</button>
                <button class="btn-submit" onclick="submitBooking()">Submit Booking</button>
            </div>
        </div>

        <!-- Success -->
        <div class="step" id="success">
            <div class="success">
                <div class="success-icon">✓</div>
                <h2 class="success-title">Booking Confirmed!</h2>
                <p class="success-message">Thank you! You will receive a confirmation email shortly.</p>
            </div>
        </div>
    </div>

    <script>
        let data = {
            sport: 'ski',
            price: 100,
            participants: 1,
            days: 1,
            lessons: []
        };

        function selectSport(sport) {
            data.sport = sport;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            calculate();
        }

        function updateParticipants(val) {
            data.participants = parseInt(val);
            document.getElementById('participantsLabel').textContent = val + (val == 1 ? ' Person' : ' People');
            calculate();
        }

        function updateDays(val) {
            data.days = parseInt(val);
            document.getElementById('daysLabel').textContent = val + (val == 1 ? ' Day' : ' Days');
            calculate();
        }

        function calculate() {
            const select = document.getElementById('duration');
            data.price = parseInt(select.value);
            
            let total = data.price * data.participants * data.days;
            let deposit = Math.round(total * 0.2);
            let remaining = total - deposit;
            
            document.getElementById('total1').textContent = '$' + total;
            document.getElementById('deposit1').textContent = '$' + deposit;
            document.getElementById('remaining1').textContent = '$' + remaining;
        }

        function goToStep2() {
            // Create lesson inputs
            const container = document.getElementById('lessonsContainer');
            container.innerHTML = '';
            data.lessons = [];
            
            for (let i = 0; i < data.days; i++) {
                const lesson = document.createElement('div');
                lesson.className = 'lesson-item';
                lesson.innerHTML = `
                    <div class="lesson-title">Lesson ${i + 1}</div>
                    <div class="date-time-group">
                        <input type="date" id="date${i}" onchange="checkSchedule()">
                        <input type="time" id="time${i}" onchange="checkSchedule()">
                    </div>
                `;
                container.appendChild(lesson);
                data.lessons.push({ date: '', time: '' });
            }
            
            document.getElementById('total2').textContent = document.getElementById('total1').textContent;
            goToStep(2);
        }

        function checkSchedule() {
            let allFilled = true;
            const datesList = document.getElementById('datesList');
            datesList.innerHTML = '';
            
            for (let i = 0; i < data.days; i++) {
                const date = document.getElementById('date' + i).value;
                const time = document.getElementById('time' + i).value;
                
                data.lessons[i] = { date, time };
                
                if (!date || !time) {
                    allFilled = false;
                } else {
                    const item = document.createElement('div');
                    item.className = 'date-item';
                    item.innerHTML = `
                        <span class="date-item-label">Lesson ${i + 1}:</span>
                        <span class="date-item-value">${date} at ${time}</span>
                    `;
                    datesList.appendChild(item);
                }
            }
            
            document.getElementById('btnStep3').disabled = !allFilled;
        }

        function goToStep3() {
            document.getElementById('total3').textContent = document.getElementById('total1').textContent;
            
            const datesList3 = document.getElementById('datesList3');
            datesList3.innerHTML = '';
            
            data.lessons.forEach((lesson, i) => {
                const item = document.createElement('div');
                item.className = 'date-item';
                item.innerHTML = `
                    <span class="date-item-label">Lesson ${i + 1}:</span>
                    <span class="date-item-value">${lesson.date} at ${lesson.time}</span>
                `;
                datesList3.appendChild(item);
            });
            
            goToStep(3);
        }

        function goToStep(num) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + num).classList.add('active');
        }

        function submitBooking() {
            const booking = {
                ...data,
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                age: document.getElementById('age').value,
                skill: document.getElementById('skill').value,
                hotel: document.getElementById('hotel').value,
                notes: document.getElementById('notes').value
            };
            
            // Send to Telegram
            const botToken = '7870726273:AAFJYdVDORc6Y3P-_57cqIzWZ5OqJXu8oLE';
            const chatId = '878419211';
            
            let msg = '🎿 NEW BOOKING\n\n';
            msg += `Name: ${booking.name}\n`;
            msg += `Email: ${booking.email}\n`;
            msg += `Phone: ${booking.phone}\n`;
            msg += `Sport: ${booking.sport}\n`;
            msg += `Participants: ${booking.participants}\n\n`;
            msg += 'SCHEDULE:\n';
            booking.lessons.forEach((l, i) => {
                msg += `Lesson ${i+1}: ${l.date} at ${l.time}\n`;
            });
            
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: msg })
            });
            
            goToStep('success');
        }

        calculate();
    </script>
</body>
</html>
